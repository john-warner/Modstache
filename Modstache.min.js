var Modstache=function(){"use strict";let e={version:"1.1.5"},t={removeStache:!1,escape:!0,translate:null,alwaysSetTranslatedProperty:!1,reactive:!0,stache:"{}",mustacheInArrayTemplate:!0,cache:!0,events:{oninit:null,onremoved:null,onupdated:null}};const n="slot",r="{if}",l="{root}",o="{oninit}",a="{template}",s="{nonreactive}";let i=null,u=new WeakMap,p=new WeakMap;function c(e,t,n,r,l=null,o=null){var a,s={base:l||e,root:e,parent:t,propertyName:"",descriptor:null,array:r,path:n,parentContext:o&&o.length>0?o[0]!==e?[e,...o]:o:[e]};let i=!1,u=n.split(".");return u.forEach(((e,n)=>{i||(s.propertyName=e,void 0!==a?(s.parent=a,a=a[e]):(s.parent=t,a=t[e]),void 0===a&&(n<u.length-1||!(s.propertyName in s.parent))&&(i=!0))})),i?null:(s.descriptor=Object.getOwnPropertyDescriptor(s.parent,s.propertyName),s)}function f(e){let n=Object.assign({},t);return e.events=Object.assign({},t.events),Object.assign(n,e)}const m=e=>{var t=document.createElement("template");return t.innerHTML=e,t.content},h=e=>e?.constructor===Object,d=e=>"function"==typeof e,g=(e,t,n)=>({element:e,root:t?.root,parent:t?.parent,key:t?.propertyName,array:t?.array,events:n.events,base:t?.base,parentage:t?.parentContext}),y=e=>"{}"===e.stache?"\\{\\}":e.stache;function v(e,n,r=t,l=null,o=null){if(r=f(r),o=o||n,e=d(e)?e():e,-1===["string","number"].indexOf(typeof e))throw"Please provide a valid template";return n?e=e.replace(/\{\{([^}]+)\}\}/g,(function(e){let t=null;if((e=e.slice(2,-2)).startsWith("{base}.")?(e=e.substring(7),t=c(n,o,e,l,o)):t=c(n,n,e,l,o),null!=t){let e=t.parent[t.propertyName];return"function"==typeof val&&(e=e()),r.escape?"string"==typeof(a=e+"")?String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):"":e+""}return"{{"+e+"}}";var a})):e}function b(e,r,l=t,o=null,i=null,u=null){l=f(l);let p=y(l);var m=[...e.querySelectorAll("["+p+"]")];let v=l.translate,b=[],A=e instanceof DocumentFragment?null:e.getAttribute(l.stache);return i=i||r,null!==A&&m.unshift(e),m.forEach((e=>{let t=f(l),p={removed:!1},m=!1;if(!b.includes(e)){let l=e.getAttribute(t.stache).split(";"),f=null;l.some((l=>{if(null!==f&&(t.reactive=f,f=null),l===s)return t.reactive=!1,!1;var A,x=l.split(":"),w=null,M=null;x.length>1?(w=x[0],A=x[1]):A=l;let L=A[A.length-1];if("-"==L?(f=t.reactive,t.reactive=!1,A=A.slice(0,-1)):"+"==L&&(f=t.reactive,t.reactive=!0,A=A.slice(0,-1)),A.includes(">")){let e=A.split(">");M=e[0],A=e[1]}var F=null;if(A.startsWith("{base}.")?(A=A.substring(7),F=c(r,i,A,o,i,u)):F=c(r,r,A,o,i,u),null!=F){var I=F.parent[F.propertyName];void 0!==I&&(w&&"{"===w[0]?N(w,e,I,F,t,b,p):(null==w&&v&&v.hasOwnProperty(A)&&(w=v[A]),null!==M?function(e,t,n,r,l,o){let a,s=[t];var i=g(t,l,o);Object.assign({},o);let u=d(l.parent[l.propertyName]);a=n in t?()=>{let e=t[n];u?l.parent[l.propertyName](e,i):l.parent[l.propertyName]=e}:()=>{let e=t.getAttribute(n);u?l.parent[l.propertyName](e,i):l.parent[l.propertyName]=e};t[e]=a}(w,e,M,0,F,t):b.push(...function(e,t,r,l,o,s){var i=g(e,l,o),u=B(r,e,i);let p=[e],f=y(o);if(h(u))D(e,u,l,i,o);else if(Array.isArray(u))p.push(...e.querySelectorAll("["+f+"]")),function(e,t,r,l,o,s){let i=e.cloneNode(!0),u=e.parentNode,p=[];var f,m;let h=e.getAttribute(l.stache).split(";"),d=-1;for(let n=0;n<h.length;n++){let i=h[n].split(":");if(i.length>1&&i[0].length>1&&"{"===i[0][0])if(i[0]===a)m=i[1];else{let n=c(r.root,r.parent,i[1],t,null,r.parentContext);if(n){let t=n.parent[n.propertyName];N(i[0],e,t,n,l,o,s)}}else i[0]==r.path&&(d=n)}if(l.mustacheInArrayTemplate&&!m){/\{\{([^}]+)\}\}/g.test(i.outerHTML)&&(i=i.outerHTML)}let g=function(e,t,n,r,l,o,a){return{template:e,templateSpecifier:t,parent:n,elements:r,models:[],elementCount:0,options:l,base:o,proxy:null,sibling:null,placeholder:null,parentContext:a}}(i,m,u,p,l,r.base,r.parentContext);l.reactive&&(r.parent[r.propertyName]=f=function(e,t){let n={push:S(e),unshift:E(e),splice:O(e),pop:j(e),shift:k(e),sort:P(e),replace:T(e)},r={get:function(e,t){const r=e[t];if("function"==typeof r)switch(t){case"push":return n.push;case"unshift":return n.unshift;case"splice":return n.splice;case"pop":return n.pop;case"shift":return n.shift;case"sort":return n.sort;default:return r.bind(e)}return r},set:function(e,t,r,l){return isNaN(t)||n.replace(1*t,r),"length"===t&&e.length>r&&n.splice(r),e[t]=r,!0}};return new Proxy(t,r)}(g,t),g.proxy=f);g.placeholder=document.createElement(n),t.length>0&&(g.elementCount=C(g,t,e,p));g.models=t,0===g.elementCount&&u.insertBefore(g.placeholder,e);g.sibling=e.nextSibling,u.removeChild(e)}(e,u,l,o,p,s),s.removed=!0;else if(t){let n=c(e,e,t,null,null);null===n&&e.hasAttribute(t)?e.hasAttribute(t)&&W(e,t,u,l,i,o):q(n,u,l,i,o,e)}else""===t?function(e,t,n,r){r.reactive&&H(t,(t=>t=B(t,e,n)),e)}(e,l,i,o):D(e,u,l,i,o);return p}(e,w,I,F,t,p))))}else w&&"{"===w[0]&&(N(w,e,null,null,t,b,p),m=!0);return p.removed})),m||(t.removeStache&&e.removeAttribute(t.stache),t.events.oninit&&t.events.oninit(e))}})),e}function N(e,t,n,a,s,i,u){switch(e){case r:!function(e,t,n,r,l,o){B(t,e,g(e,n,r))||(!function(e,t,n){let r=y(n);var l=[...e.querySelectorAll("["+r+"]")];e.parentNode&&e.parentNode.removeChild(e);t.push(...l)}(e,l,r),o.removed=!0)}(t,n,a,s,i,u);break;case l:!function(e,t,n,r,l,o){let a=[...e.querySelectorAll("["+y(r)+"]")];if(null!==t){let l=B(t,e,g(e,n,r));[...e.children].forEach((e=>{b(e,l,r,null,n.base)}))}l.push(...a)}(t,n,a,s,i);break;case o:!function(e,t,n,r,l,o){var a=g(e,n,r);r.events.oninit=e=>{t(a,e)}}(t,n,a,s);break}}function A(e,t,n){let r=n.translate;for(var l in t){let i=l,u=!1;var o=c(t,t,l),a=g(e,o,n);let p=B(t[l],e,a);r&&r.hasOwnProperty(l)&&(i=r[l],u=!0);var s=c(e,e,i,null);null!==s?q(s,p,o,a,n,e):e.hasAttribute(i)?W(e,i,p,o,a,n):u&&n.alwaysSetTranslatedProperty&&(e[i]=p,q(s=c(e,e,i,null),p,o,a,n,e))}}function C(e,t,n,r){return 0==t.length?0:1!=t.length?function(e,t,n,r){let l=0;return t.forEach(((t,o)=>{t&&(r[o]=x(e,t,e.parent,n),l++)})),l}(e,t,n,r):t[0]?(r.push(x(e,t[0],e.parent,n)),1):0}function x(e,n,r,l){if(e.models.includes(n)){let t=e.models.indexOf(n),o=e.elements[t];if(o)return r.insertBefore(o.e,l),e.models[t]=null,e.elements[t]=null,e.elementCount--,o}let o=p.get(n);if(o)return o.s?.forEach((e=>{e.p.add(e.s)})),r.insertBefore(o.e,l),o;let a=function(e,t){let n=e.template,r=e.templateSpecifier;if(r){let e=c(t,t,r,null);if(e){let t=e.parent[e.propertyName];if(t instanceof DocumentFragment||t.constructor===String)return t}}return n}(e,n);i=new Set,a=a.constructor===String?m(v(a,n,e.options,e.proxy,e.base)).firstElementChild:a.cloneNode(!0);let s=null;a instanceof DocumentFragment&&(s=[...a.children]),r.insertBefore(a,l),s?function(e,n,r=t,l=null,o=null,a=null){e.forEach((e=>{b(e,n,r,l,o,a)}))}(s,n,e.options,e.proxy,e.base,e.parentContext):b(a,n,e.options,e.proxy,e.base,e.parentContext);let u={e:s??a,s:i};return i=null,u}const w=(e,t,n)=>{let r=[];if(isNaN(n))n=e.elements.length;else if(n<=0)return;let l=Math.min(t+n,e.elements.length);for(let n=t;n<l;n++){let t=e.elements[n];t&&(e.options.cache&&p.set(e.models[n],t),r.push(t),e.elements[n]=null)}e.elementCount>0&&e.elementCount===r.length&&(Array.isArray(r[0].e)?r[0].e.forEach((t=>{e.parent.insertBefore(e.placeholder,t)})):e.parent.insertBefore(e.placeholder,r[0].e)),r.forEach((t=>{Array.isArray(t.e)?t.e.forEach((t=>{e.parent.removeChild(t)})):e.parent.removeChild(t.e),F(t.s)})),e.elementCount-=r.length},M=(e,t,n)=>{if(n.length>0){let r=((e,t)=>{if(0===e.elementCount)return e.placeholder;for(;t<e.elements.length;t++)if(e.elements[t])return Array.isArray(e.elements[t].e)?e.elements[t].e[0]:e.elements[t].e;return e.sibling})(e,t),l=[],o=C(e,n,r,l);return r===e.placeholder&&e.parent.removeChild(r),e.elementCount+=o,l}return null},S=e=>function(...t){let n=M(e,e.models.length,t);return n&&e.elements.push(...n),e.models.push(...t)},E=e=>function(...t){let n=M(e,0,t);return e.elements.unshift(...n),e.models.unshift(...t)},O=e=>function(t,n,...r){t=t<0?Math.max(0,e.models.length-t):Math.min(t,e.models.length),w(e,t,n);let l=M(e,t,r);return l?e.elements.splice(t,n,...l):isNaN(n)?e.elements.splice(t):e.elements.splice(t,n),e.models.splice(...arguments)},j=e=>function(){w(e,e.models.length-1,1),e.elements.pop(...arguments);const t=e.models.pop(...arguments);return t},k=e=>function(){w(e,0,1),e.elements.shift(...arguments);const t=e.models.shift(...arguments);return t},P=e=>function(){w(e,0,e.models.length);let t=[...e.models];e.elements.splice(0),e.models.splice(0),t.sort(...arguments);let n=M(e,0,t);return e.elements.splice(0,0,...n),e.models.splice(0,0,...t),e.proxy},T=e=>function(t,n){if(e.elements[t]&&(w(e,t,1),e.elements[t]=null),n){let r=M(e,t,[n]);e.elements[t]=r[0],e.models[t]=n}else e.models[t]=null};function B(e,t,n){return d(e)?e(n,t,n.parent):e}function W(e,t,n,r,l,o){e.setAttribute(t,n),o.reactive&&H(r,(n=>(n=B(n,e,l),e.setAttribute(t,n),n)),e)}function q(e,t,n,r,l,o){e.parent[e.propertyName]=t,l.reactive&&H(n,(t=>(t=B(t,e.root,r),e.parent[e.propertyName]=t,t)),o)}function D(e,t,n,r,l){h(t)?A(e,t,l):e.textContent=t,l.reactive&&H(n,(t=>(t=B(t,e,r),h(t)?A(e,t,l):e.textContent=t,t)),e)}function H(e,t,n){let r=e.descriptor.set,l=e.descriptor.get,o=e.parent[e.propertyName],a=null,s=new Set;if(u.has(e.parent)?a=u.get(e.parent):(a=new Map,u.set(e.parent,a)),a.has(e.propertyName))s=a.get(e.propertyName),L(s,t,n);else{L(s,t,n);let i={get:d(l)?l:()=>o,set:d(r)?e=>{o=e,s.forEach((t=>t(e))),p=new WeakMap,r(e)}:e=>{o=e,s.forEach((t=>t(e))),p=new WeakMap},configurable:e.descriptor.configurable,enumerable:e.descriptor.enumerable};Object.defineProperty(e.parent,e.propertyName,i),a.set(e.propertyName,s)}null!==i&&i.add({p:s,s:t})}function L(e,t,n){e.add(t)}function F(e){e?.forEach((e=>{e.p.delete(e.s)}))}return e.fill=function(e,n,r=t){return"string"==typeof e&&(e=m(v(e,n,r))),b(e,n,r)},e.fillHTML=v,e.fillDOM=b,e.options=function(e){return t=f(e),Object.assign({},t)},e.removeReactions=F,e}(),_M_=Modstache;